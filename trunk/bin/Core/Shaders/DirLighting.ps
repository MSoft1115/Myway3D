/////////////////////////////////////////////////////////////////////////
//
//
//

struct PS_IN
{
	float2 uv0 : TEXCOORD0;
};

uniform sampler2D gTex_Color;
uniform sampler2D gTex_Normal;
uniform sampler2D gTex_Shadow;

uniform float3 gLightDir;
uniform float4 gAmbient;
uniform float4 gDiffuse;
uniform float4 gSpecular;

float4 main(PS_IN In) : COLOR
{
	float4 clr = tex2D(gTex_Color, In.uv0);
	float3 nrm = tex2D(gTex_Normal, In.uv0).rgb;
	float shadow = tex2D(gTex_Shadow, In.uv0).r;
	
	float NdL = dot(nrm, gLightDir);
	NdL = saturate(NdL);
	
	clr = clr * (gAmbient + NdL * gDiffuse * shadow); 
	clr.a = 1;
	
	return clr;
}